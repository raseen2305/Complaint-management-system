<!-- AI Chat Widget -->
<div class="chat-widget">
    <div class="chat-toggle" id="chatToggle">
        <i class="bi bi-chat-dots"></i>
    </div>
    
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <h6 class="mb-0">
                <i class="bi bi-robot me-2"></i>AI Assistant
            </h6>
            <button class="btn-close" id="chatClose"></button>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="message-content">
                    <i class="bi bi-robot me-2"></i>
                    Hello! I'm your AI assistant. How can I help you with your complaint today?
                </div>
            </div>
        </div>
        
        <div class="chat-input">
            <form id="chatForm">
                <div class="input-group">
                    <input type="text" class="form-control" id="chatInput" placeholder="Type your message..." required>
                    <button class="btn btn-primary" type="submit">
                        <i class="bi bi-send"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    .chat-widget {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
    }
    
    .chat-toggle {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        color: white;
        font-size: 1.5rem;
    }
    
    .chat-toggle:hover {
        transform: scale(1.1);
        box-shadow: var(--shadow-xl);
    }
    
    .chat-container {
        position: absolute;
        bottom: 80px;
        right: 0;
        width: 350px;
        height: 500px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-xl);
        display: none;
        flex-direction: column;
        overflow: hidden;
    }
    
    .chat-container.show {
        display: flex;
        animation: slideUp 0.3s ease-out;
    }
    
    .chat-header {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .chat-messages {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        background: var(--gray-50);
    }
    
    .message {
        margin-bottom: 1rem;
        display: flex;
    }
    
    .user-message {
        justify-content: flex-end;
    }
    
    .bot-message {
        justify-content: flex-start;
    }
    
    .message-content {
        max-width: 80%;
        padding: 0.75rem 1rem;
        border-radius: var(--border-radius);
        font-size: 0.875rem;
        line-height: 1.4;
    }
    
    .user-message .message-content {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
    }
    
    .bot-message .message-content {
        background: white;
        color: var(--gray-800);
        border: 1px solid var(--gray-200);
    }
    
    .chat-input {
        padding: 1rem;
        background: white;
        border-top: 1px solid var(--gray-200);
    }
    
    .chat-input .form-control {
        border: 1px solid var(--gray-300);
        border-radius: var(--border-radius) 0 0 var(--border-radius);
    }
    
    .chat-input .btn {
        border-radius: 0 var(--border-radius) var(--border-radius) 0;
    }
    
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @media (max-width: 768px) {
        .chat-container {
            width: 300px;
            height: 400px;
        }
        
        .chat-widget {
            bottom: 10px;
            right: 10px;
        }
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chatToggle = document.getElementById('chatToggle');
    const chatContainer = document.getElementById('chatContainer');
    const chatClose = document.getElementById('chatClose');
    const chatForm = document.getElementById('chatForm');
    const chatInput = document.getElementById('chatInput');
    const chatMessages = document.getElementById('chatMessages');
    
    let isOpen = false;
    
    // Toggle chat
    chatToggle.addEventListener('click', function() {
        isOpen = !isOpen;
        if (isOpen) {
            chatContainer.classList.add('show');
            chatInput.focus();
        } else {
            chatContainer.classList.remove('show');
        }
    });
    
    // Close chat
    chatClose.addEventListener('click', function() {
        isOpen = false;
        chatContainer.classList.remove('show');
    });
    
    // Send message
    chatForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const message = chatInput.value.trim();
        if (message) {
            addMessage(message, 'user');
            chatInput.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const response = getAIResponse(message);
                addMessage(response, 'bot');
            }, 1000);
        }
    });
    
    function addMessage(content, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        
        if (sender === 'bot') {
            contentDiv.innerHTML = `<i class="bi bi-robot me-2"></i>${content}`;
        } else {
            contentDiv.textContent = content;
        }
        
        messageDiv.appendChild(contentDiv);
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
    function getAIResponse(message) {
        const lowerMessage = message.toLowerCase();
        
        if (lowerMessage.includes('complaint') || lowerMessage.includes('issue') || lowerMessage.includes('problem')) {
            return "I understand you have a complaint. You can submit a new complaint through the 'Submit Complaint' section. Make sure to provide detailed information about your issue for faster resolution.";
        } else if (lowerMessage.includes('status') || lowerMessage.includes('check') || lowerMessage.includes('track')) {
            return "You can check the status of your complaints in the 'Pending Complaints' or 'Resolved Complaints' sections. Each complaint shows its current status and priority level.";
        } else if (lowerMessage.includes('help') || lowerMessage.includes('support')) {
            return "I'm here to help! You can submit complaints, track their status, view statistics, and manage your profile. What specific assistance do you need?";
        } else if (lowerMessage.includes('password') || lowerMessage.includes('login')) {
            return "For password-related issues, you can use the 'Change Password' option in your dashboard. If you're having trouble logging in, try the 'Forgot Password' link on the login page.";
        } else if (lowerMessage.includes('profile') || lowerMessage.includes('account')) {
            return "You can update your profile information in the Dashboard section. This includes your personal details, contact information, and user type.";
        } else {
            return "I'm here to help with your complaint management needs. You can ask me about submitting complaints, checking status, changing passwords, or any other system-related questions.";
        }
    }
});
</script>